<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Theoretical background &mdash; PARSE 0.1.1 documentation</title>
      <link rel="stylesheet" href="static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="static/jquery.js"></script>
        <script src="static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="static/documentation_options.js"></script>
        <script src="static/doctools.js"></script>
        <script src="static/sphinx_highlight.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Structure and pipeline" href="structure.html" />
    <link rel="prev" title="How to install" href="install.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            PARSE
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">How to install</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Theoretical background</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#rev-concept">REV concept.</a></li>
<li class="toctree-l2"><a class="reference internal" href="#subsamples-selection">Subsamples selection.</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rev-size-estimation-scalar-metric">REV size estimation. Scalar metric.</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rev-size-estimation-vector-metric">REV size estimation. Vector metric.</a></li>
<li class="toctree-l2"><a class="reference internal" href="#image-comparison">Image comparison.</a></li>
<li class="toctree-l2"><a class="reference internal" href="#stationarity-analysis">Stationarity analysis.</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="structure.html">Structure and pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="metrics.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="REVAnalyzer.html">Code Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PARSE</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Theoretical background</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="theoretical-background">
<span id="theory"></span><h1>Theoretical background<a class="headerlink" href="#theoretical-background" title="Permalink to this heading"></a></h1>
<div class="toctree-wrapper compound">
</div>
<p>Here, we present a short theoretical introduction to the representativity analysis of binary images.</p>
<section id="rev-concept">
<h2>REV concept.<a class="headerlink" href="#rev-concept" title="Permalink to this heading"></a></h2>
<p><strong>Representative Elemental Volume (REV)</strong> concept is a useful characteristic of the system heterogeneity.
By definition, REV is the smallest volume in which large fluctuations of observed quantities or calculated metric no longer occur.
So, subdomains with volumes larger than REV can be treated as homogenous.</p>
<p>The common technique for some metric REV analysis is cutting subsamples of growing sizes from a given sample and comparison of the studied metric values for them.
One can perform REV analysis for a scalar metric <span class="math notranslate nohighlight">\(S\)</span> by checking if the values of <span class="math notranslate nohighlight">\(S\)</span> converge to a stable value with an increasing subsample volume of the studied sample.
Two criteria can be applied for the estimation of such a convergence:</p>
<blockquote>
<div><ul class="simple">
<li><ul>
<li><p>the difference in values of <span class="math notranslate nohighlight">\(S\)</span> for subsamples of different sizes becomes negligible (I);</p></li>
</ul>
</li>
<li><ul>
<li><p>the deviations of <span class="math notranslate nohighlight">\(S\)</span> for subsamples of fixed size becomes negligible (II).</p></li>
</ul>
</li>
</ul>
</div></blockquote>
<p>We call REV obtained using criteria (I) and (II) <strong>deterministic (dREV)</strong> and <strong>statistical (sREV)</strong>, respectively.</p>
<p>For a vector metric <span class="math notranslate nohighlight">\(\boldsymbol{V}\)</span> the same criteria can be used as well, with the substitution of the <em>difference in scalar values</em> by the <em>distance between vectors</em>.</p>
</section>
<section id="subsamples-selection">
<h2>Subsamples selection.<a class="headerlink" href="#subsamples-selection" title="Permalink to this heading"></a></h2>
<img alt="images/fig_subsamples.png" class="align-center" src="images/fig_subsamples.png" />
<p>At <em>i</em>-th selection step subsamples for REV analysis SC <span class="math notranslate nohighlight">\(_k(i)\)</span> are taken as it is shawn in the figure above. Total number of selection steps <span class="math notranslate nohighlight">\(N\)</span> is input parameter for computations.</p>
<p>The reliable sREV analysis is possible only if subsamples do not overlap or their overlap is limited. Therefore, we introduce the <span class="math notranslate nohighlight">\(N_{sREV}\)</span> parameter. For <span class="math notranslate nohighlight">\(i \le N_{sREV}\)</span>, we cut from the considered sample all 9 subsamples SC <span class="math notranslate nohighlight">\(_k(i)\)</span>. For <span class="math notranslate nohighlight">\(i &gt; N_{sREV}\)</span>, only the center subsamples SC <span class="math notranslate nohighlight">\(_0(i)\)</span> are cut.</p>
</section>
<section id="rev-size-estimation-scalar-metric">
<h2>REV size estimation. Scalar metric.<a class="headerlink" href="#rev-size-estimation-scalar-metric" title="Permalink to this heading"></a></h2>
<p>For the estimation of sREV size for scalar metric <span class="math notranslate nohighlight">\(S\)</span>, we first calculate its values <span class="math notranslate nohighlight">\(S_{ik}\)</span> for the subsamples SC <span class="math notranslate nohighlight">\(_k(i)\)</span>, and then obtain mean value
<span class="math notranslate nohighlight">\(\bar{S_i}\)</span>, standard deviation <span class="math notranslate nohighlight">\(\sigma_i\)</span> and, finally, use the following formula:</p>
<div class="math notranslate nohighlight">
\[m: \forall i \ge m, \quad \sigma_{norm}(i) = \sigma_i/ \bar{S_i} &lt; \varepsilon_{sREV},  \quad  (1)\]</div>
<p>where <span class="math notranslate nohighlight">\(\varepsilon_{sREV}\)</span> is sREV threshold. The value, obtained using Eq. (1), is assigned to the attribute sREV_size_1 of an REVAnalyzer object in the case of scalar metric REV analysis.</p>
<p>For the estimation of dREV size we use two different formulas:</p>
<div class="math notranslate nohighlight">
\[m: \forall i \ge m, \quad \delta_1(i) = |2(\bar{S_i} - \bar{S}_{i+1})/(\bar{S_i} + \bar{S}_{i+1})| &lt; \varepsilon_{dREV} \quad (2)\]</div>
<p>and</p>
<div class="math notranslate nohighlight">
\[m: \forall i \ge m,  \quad \delta_2(i) = |2(\bar{S_i} - S_0)/(\bar{S_i} + S_0)| &lt; \varepsilon_{dREV}, \quad (3)\]</div>
<p>where <span class="math notranslate nohighlight">\(S_0\)</span> is the metirc value for the uncut analyzed image and <span class="math notranslate nohighlight">\(\varepsilon_{dREV}\)</span> is dREV threshold.
The values, obtained using Eqs. (2) and (3), are assigned, respectively, to the attributes dREV_size_1 and dREV_size_2 of an REVAnalyzer object in the case of scalar metric REV analysis.</p>
</section>
<section id="rev-size-estimation-vector-metric">
<h2>REV size estimation. Vector metric.<a class="headerlink" href="#rev-size-estimation-vector-metric" title="Permalink to this heading"></a></h2>
<p>One can apply the methods for REV size estimation for scalar metric <span class="math notranslate nohighlight">\(S\)</span> described above to the vector metric <span class="math notranslate nohighlight">\(\boldsymbol{V}\)</span>, using some adjustments.
Let some descriptor <span class="math notranslate nohighlight">\(D_i\)</span> defined at <span class="math notranslate nohighlight">\(i\)</span>-th subcube is vectorized into the vector <span class="math notranslate nohighlight">\(\boldsymbol{V_i}(N_{\textrm{bins}}(i), s(i), r(i))\)</span>,  where number of bins <span class="math notranslate nohighlight">\(N_{\textrm{bins}}(i)\)</span>, bin size <span class="math notranslate nohighlight">\(s(i)\)</span> and range <span class="math notranslate nohighlight">\(r(i)\)</span> are vectorization parameters. We fix bin size equal for all the subcubes: <span class="math notranslate nohighlight">\(s(i)\)</span> = const, and require that vector <span class="math notranslate nohighlight">\(\boldsymbol{V_{i+1}}\)</span> obtained from <span class="math notranslate nohighlight">\(D\)</span> at the next increment step should have the same dimension (equal to number of bins) and range, as <span class="math notranslate nohighlight">\(\boldsymbol{V_i}\)</span>.
If ranges <span class="math notranslate nohighlight">\(r(i)\)</span> and <span class="math notranslate nohighlight">\(r(i+1)\)</span> coincide, this condition is satisfied automatically, in opposite case, vector <span class="math notranslate nohighlight">\(\boldsymbol{V_{i+1}}\)</span> is modified to the vector <span class="math notranslate nohighlight">\(\boldsymbol{V*_{i+1}}\)</span> as the following: bins, present in <span class="math notranslate nohighlight">\(r(i)\)</span>  but absent in <span class="math notranslate nohighlight">\(r(i+1)\)</span> are added to <span class="math notranslate nohighlight">\(\boldsymbol{V_{i+1}}\)</span> and filled by zeroes, bins absent in <span class="math notranslate nohighlight">\(r(i)\)</span>  but present in <span class="math notranslate nohighlight">\(r(i+1)\)</span> are removed from <span class="math notranslate nohighlight">\(\boldsymbol{V_{i+1}}\)</span> (see figure below).</p>
<img alt="images/fig_scheme.png" class="align-center" src="images/fig_scheme.png" />
<p>At each selection step <span class="math notranslate nohighlight">\(i\)</span> we take subsamples SC <span class="math notranslate nohighlight">\(_k(i)\)</span> and SC <span class="math notranslate nohighlight">\(_l(i+1)\)</span> and compute the normalized distance between the vectors <span class="math notranslate nohighlight">\(\boldsymbol{V_{l(i+1)}}\)</span> and <span class="math notranslate nohighlight">\(\boldsymbol{V_{ki}}\)</span>:</p>
<div class="math notranslate nohighlight">
\[\delta(i,k,l) = 2 \frac{||\boldsymbol{V^*_{l(i+1)}} - \boldsymbol{V_{ki}||}}{||\boldsymbol{V^*_{l(i+1)}}||+||\boldsymbol{V_{ki}}||}. \quad (4)\]</div>
<p>Order of the vector norm <span class="math notranslate nohighlight">\(||\boldsymbol{V}||\)</span> is the input parameter of any vectorizer used in PARSE library.</p>
<p>For the estimation of dREV and sREV sizes for vector metric, fist we calculate mean values <span class="math notranslate nohighlight">\(\bar{\delta}(i)\)</span> over all pairs of indices (<span class="math notranslate nohighlight">\(k\)</span>, <span class="math notranslate nohighlight">\(l\)</span>), its standard deviation <span class="math notranslate nohighlight">\(\sigma_i\)</span> and normalized standard deviation  <span class="math notranslate nohighlight">\(\sigma_{norm}(i) = \sigma_i/ \bar{\delta}(i)\)</span>.</p>
<p>Then for the estimation of dREV size we use the following formula:</p>
<div class="math notranslate nohighlight">
\[m: \forall i \ge m, \quad \bar{\delta}(i) &lt; \varepsilon_{dREV}, \quad (5)\]</div>
<p>where <span class="math notranslate nohighlight">\(\varepsilon_{dREV}\)</span> is dREV threshold. The value, obtained using Eq. (5), is assigned to the attribute dREV_size_1 of an REVAnalyzer object in the case of vector metric REV analysis.</p>
<p>For the estimation of sREV size we use two following formulas:</p>
<div class="math notranslate nohighlight">
\[m: \forall i \ge m, \quad  \sigma_{norm1}(i) = \sigma_i/ \varepsilon_{dREV} &lt; \varepsilon_{sREV}  \quad  (6)\]</div>
<p>and</p>
<div class="math notranslate nohighlight">
\[m: \forall i \ge m,  \quad  \sigma_{norm2}(i) = \sigma_i/ D(i) &lt; \varepsilon_{sREV}, \quad  (7)\]</div>
<p>where <span class="math notranslate nohighlight">\(D(i) = \varepsilon_{dREV}\)</span>, if <span class="math notranslate nohighlight">\(\bar{\delta}(i) &lt; \varepsilon_{dREV}\)</span> and <span class="math notranslate nohighlight">\(D(i) = \bar{\delta}(i)\)</span> if
<span class="math notranslate nohighlight">\(\bar{\delta}(i) \ge \varepsilon_{dREV}\)</span>; <span class="math notranslate nohighlight">\(\varepsilon_{sREV}\)</span> is sREV threshold. The values, obtained using Eqs. (6) and (7), are assigned, respectively, to the attributes sREV_size_1 and sREV_size_2 of an REVAnalyzer object in the case of scalar metric REV analysis.</p>
</section>
<section id="image-comparison">
<h2>Image comparison.<a class="headerlink" href="#image-comparison" title="Permalink to this heading"></a></h2>
<p>To compare image samples <span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(B\)</span> using descriptor <span class="math notranslate nohighlight">\(D\)</span> susceptible to vectorization one can make modification as decribed above and calculate the distance value:</p>
<div class="math notranslate nohighlight">
\[\delta_{AB} = 2 \frac{||\boldsymbol{V_A} - \boldsymbol{V^*_B}||}{||\boldsymbol{V_A}||+||\boldsymbol{V^*_B}||}. \quad (8)\]</div>
<p>If Euclidean norm is selected, one can also use cosine similarity to compare samples <span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(B\)</span>:</p>
<div class="math notranslate nohighlight">
\[\mathrm{Sc}_{AB} = \frac{(\boldsymbol{V_A}  \cdot \boldsymbol{V^*_B})}{||\boldsymbol{V_A}||||\boldsymbol{V^*_B}||}. \quad (9)\]</div>
</section>
<section id="stationarity-analysis">
<h2>Stationarity analysis.<a class="headerlink" href="#stationarity-analysis" title="Permalink to this heading"></a></h2>
<p>We propose the following empirical stationarity criterion in our library. For all <span class="math notranslate nohighlight">\(i = 1, ..\le N_{sREV}-1\)</span> and <span class="math notranslate nohighlight">\(k,l = 0,..8\)</span> we compute the values</p>
<div class="math notranslate nohighlight">
\[\delta^{st}_1(i,k,l) = 2 \frac{||\boldsymbol{V_{ik}} - \boldsymbol{V_{il}}||}{||\boldsymbol{V_{ik}}||+||\boldsymbol{V_{il}}||} \quad (10)\]</div>
<p>and</p>
<div class="math notranslate nohighlight">
\[\delta^{st}_2(i,k) = 2 \frac{||\boldsymbol{V_{ik}} - \boldsymbol{V^*_{(i+1)k}}||}{||\boldsymbol{V_{ik}}||+||\boldsymbol{V^*_{(i+1)k}}||}. \quad (11)\]</div>
<p>Then we check out the satisfaction of following condition:</p>
<div class="math notranslate nohighlight">
\[\forall i \ge N_{sREV}-1, \quad  \max_{(k,l)} \delta^{st}_1(i,k,l) &lt; \varepsilon_{st} \quad \textrm{and} \quad  \max_{k} \delta^{st}_2(i,k) &lt;   \varepsilon_{st}. \quad (12)\]</div>
<p>Here, <span class="math notranslate nohighlight">\(\varepsilon_{st}\)</span> is stationarity threshold.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="install.html" class="btn btn-neutral float-left" title="How to install" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="structure.html" class="btn btn-neutral float-right" title="Structure and pipeline" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Andrey Zubov.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
